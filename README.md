# ChatGPT Telegram Bot

Телеграм-бот, который интегрируется с ChatGPT для генерации текстовых ответов по запросу пользователя.

## Возможности

Команды `/start` и `/help`
Интеграция с ChatGPT API
Сохранение истории диалогов
Использование контекста предыдущих сообщений для более качественных ответов
Кнопка "Новый запрос" для сброса контекста
Обработка ошибок и исключений

## Требования

- Python 3.8+
- Telegram Bot Token (получить от BotFather)
- OpenAI API Key (получить на https://platform.openai.com/api-keys)

## Установка

1. **Клонируйте репозиторий:**
```bash
git clone <repository_url>
cd chatgpt_tgbot
```

2. **Установите зависимости:**
```bash
pip install -r requirements.txt
```

3. **Создайте файл `.env`:**
```bash
cp .env.example .env
```

4. **Отредактируйте `.env` и добавьте свои API ключи:**
```
TELEGRAM_BOT_TOKEN=your_token_here
OPENAI_API_KEY=your_key_here
```

## Запуск

```bash
python bot.py
```

## Команды бота

- `/start` - Начать новый диалог (очищает историю сообщений)
- `/help` - Получить справку по использованию бота
- `/history` - Показать историю текущего диалога
- `Новый запрос` - Кнопка для сброса контекста диалога

## Как это работает

1. Пользователь отправляет сообщение боту
2. Бот сохраняет сообщение в истории диалога
3. История отправляется в ChatGPT API
4. Ответ от ChatGPT отправляется пользователю
5. Ответ также сохраняется в истории для контекста

## Структура проекта

```
chatgpt_tgbot/
├── bot.py              # Основной файл бота
├── requirements.txt    # Зависимости Python
├── .env.example       # Шаблон для переменных окружения
└── README.md          # Этот файл
```

## Обработка ошибок

Бот обрабатывает следующие типы ошибок:
- Ошибки аутентификации OpenAI
- Превышение ограничения на количество запросов
- Прочие ошибки сети
